<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livro Jogo Interativo</title>
    <style>
        :root {
            --primary-color: #6200ee;
            --secondary-color: #03dac6;
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --text-color: #ffffff;
            --accent-color: #bb86fc;
            --danger-color: #cf6679;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            overflow: hidden;
            touch-action: manipulation;
            width: 100vw;
            height: 100vh;
            position: fixed;
        }
        
        /* ===== TELA INICIAL ===== */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: var(--background-color);
            z-index: 100;
        }
        
        .title-container {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .game-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
            text-shadow: 0 0 10px var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        .game-subtitle {
            font-size: 1.2rem;
            color: var(--secondary-color);
        }
        
        .start-button {
            padding: 15px 40px;
            font-size: 1.2rem;
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .start-button:hover, .start-button:active {
            background-color: var(--accent-color);
            transform: scale(1.05);
        }
        
        /* Elementos de anima√ß√£o de fundo */
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .floating-element {
            position: absolute;
            opacity: 0.4;
            animation: float 15s infinite linear;
        }
        
        /* ===== TELA DE PR√ìLOGO ===== */
        #prologue-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            background-color: var(--background-color);
            z-index: 90;
        }
        
        .prologue-container {
            width: 90%;
            max-width: 800px;
            height: 80%;
            position: relative;
            overflow: hidden;
        }
        
        .prologue-text {
            width: 100%;
            position: absolute;
            text-align: center;
            padding: 0 20px;
            transform: translateY(100%);
            animation: scrollUp var(--scroll-duration, 60s) linear forwards;
            line-height: 1.6;
        }
        
        .skip-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            z-index: 91;
        }
        
        /* ===== TELAS DE HIST√ìRIA ===== */
        .story-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: space-between;
            background-color: var(--background-color);
            z-index: 80;
        }
        
        .story-container {
            flex: 1;
            width: 100%;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            padding: 20px;
            touch-action: pan-y;
        }
        
        .story-text {
            width: 90%;
            max-width: 700px;
            position: absolute;
            padding: 20px;
            transform: translateY(100%);
            animation: scrollUp var(--story-scroll-duration, 30s) linear forwards;
            animation-delay: 1s; /* Reduzido para 1 segundo */
            line-height: 1.6;
            font-size: 1.1rem;
            background-color: rgba(30, 30, 30, 0.7);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .story-text h2 {
            color: var(--accent-color);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .choices-container {
            width: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: var(--surface-color);
            border-top: 2px solid var(--primary-color);
        }
        
        .choice-button {
            padding: 15px;
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        
        .choice-button:hover, .choice-button:active {
            background-color: var(--accent-color);
            color: var(--background-color);
        }
        
        /* ===== TELA DE COMBATE ===== */
        #combat-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            background-color: var(--background-color);
            z-index: 70;
        }
        
        .combat-header {
            padding: 15px;
            text-align: center;
            background-color: var(--surface-color);
            border-bottom: 2px solid var(--danger-color);
        }
        
        .combat-title {
            color: var(--danger-color);
            margin-bottom: 5px;
        }
        
        .combat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
        }
        
        .combatants {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .character {
            width: 45%;
            min-width: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .character-avatar {
            width: 80px;
            height: 80px;
            background-color: var(--surface-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            border: 2px solid var(--accent-color);
            overflow: hidden;
        }
        
        .enemy-avatar {
            border-color: var(--danger-color);
        }
        
        .character-name {
            font-size: 1.2rem;
            text-align: center;
        }
        
        .health-bar {
            width: 100%;
            height: 15px;
            background-color: var(--surface-color);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .health-fill {
            height: 100%;
            width: 100%;
            background-color: var(--accent-color);
            transition: width 0.5s ease;
        }
        
        .enemy-health {
            background-color: var(--danger-color);
        }
        
        .vs-indicator {
            font-size: 2rem;
            color: var(--accent-color);
            margin: 0 10px;
        }
        
        .combat-log {
            flex: 1;
            min-height: 120px;
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 15px;
            overflow-y: auto;
            margin-bottom: 10px;
            border: 1px solid var(--primary-color);
        }
        
        .combat-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .combat-button {
            padding: 15px;
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .combat-button:hover, .combat-button:active {
            background-color: var(--accent-color);
            color: var(--background-color);
        }
        
        .special-button {
            border-color: var(--primary-color);
        }
        
        .special-button:hover, .special-button:active {
            background-color: var(--primary-color);
        }
        
        .item-button {
            border-color: var(--secondary-color);
        }
        
        .item-button:hover, .item-button:active {
            background-color: var(--secondary-color);
        }
        
        /* ===== TELA DE RESULTADO ===== */
        #result-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 95;
            padding: 20px;
            text-align: center;
        }
        
        .result-title {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .result-text {
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .win-title {
            color: var(--accent-color);
        }
        
        .lose-title {
            color: var(--danger-color);
        }
        
        .result-button {
            padding: 15px 30px;
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .result-button:hover, .result-button:active {
            background-color: var(--accent-color);
            transform: scale(1.05);
        }
        
        /* ===== UTILIT√ÅRIOS ===== */
        .paused {
            animation-play-state: paused;
        }
        
        .hidden {
            display: none !important;
        }
        
        .visible {
            display: flex !important;
        }
        
        /* ===== ANIMA√á√ïES ===== */
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(10vw, 20vh) rotate(90deg);
            }
            50% {
                transform: translate(20vw, -10vh) rotate(180deg);
            }
            75% {
                transform: translate(-5vw, 15vh) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }
        
        @keyframes scrollUp {
            0% { transform: translateY(100%); }
            100% { transform: translateY(-100%); }
        }
        
        /* ===== RESPONSIVIDADE ===== */
        @media screen and (max-width: 768px) {
            .game-title {
                font-size: 2rem;
            }
            
            .game-subtitle {
                font-size: 1rem;
            }
            
            .story-text {
                font-size: 1rem;
                width: 95%;
            }
            
            .combatants {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .character {
                width: 80%;
            }
            
            .vs-indicator {
                margin: 10px 0;
            }
            
            .combat-actions {
                grid-template-columns: 1fr;
            }
        }
        
        @media screen and (max-width: 480px) {
            .game-title {
                font-size: 1.8rem;
            }
            
            .choices-container {
                padding: 10px;
            }
            
            .choice-button {
                padding: 12px;
                font-size: 0.9rem;
            }
            
            .character-avatar {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Tela Inicial -->
    <div id="start-screen" class="visible">
        <div class="floating-elements" id="floating-elements"></div>
        
        <div class="title-container">
            <h1 class="game-title">LIVRO JOGO INTERATIVO</h1>
            <p class="game-subtitle">Uma aventura onde suas escolhas importam</p>
        </div>
        
        <button class="start-button" id="start-button">COME√áAR AVENTURA</button>
    </div>
    
    <!-- Tela de Pr√≥logo -->
    <div id="prologue-screen">
        <div class="prologue-container">
            <div class="prologue-text" id="prologue-text">
                <h2>PR√ìLOGO</h2>
                <br><br>
                <p>Em um mundo onde a realidade se mistura com o imposs√≠vel, voc√™ est√° prestes a embarcar em uma jornada √∫nica.</p>
                <br>
                <p>Esta √© uma terra de escolhas, onde cada decis√£o tra√ßa um caminho diferente para o seu destino.</p>
                <br>
                <p>Seja prudente, seja corajoso, mas acima de tudo, seja fiel aos seus instintos.</p>
                <br>
                <p>Agora, respire fundo e prepare-se para iniciar sua aventura...</p>
                <br><br>
                <p>O destino aguarda suas escolhas...</p>
                <br><br><br>
                <p>A hist√≥ria come√ßa agora...</p>
                <br><br><br><br><br>
            </div>
        </div>
        <button class="skip-button" id="skip-prologue">Pular</button>
    </div>
    
    <!-- Telas de Hist√≥ria (ser√£o criadas dinamicamente) -->
    <div id="story-template" class="story-screen">
        <div class="story-container" id="story-container">
            <div class="story-text" id="story-text-template">
                <!-- Conte√∫do da hist√≥ria ser√° inserido aqui -->
            </div>
        </div>
        <div class="choices-container" id="choices-container-template">
            <!-- Bot√µes de escolha ser√£o inseridos aqui -->
        </div>
    </div>
    
    <!-- Tela de Combate -->
    <div id="combat-screen">
        <div class="combat-header">
            <h2 class="combat-title">COMBATE!</h2>
            <p id="combat-subtitle">Prepare-se para lutar!</p>
        </div>
        
        <div class="combat-area">
            <div class="combatants">
                <div class="character">
                    <div class="character-avatar" id="player-avatar">üßô</div>
                    <h3 class="character-name" id="player-name">Voc√™</h3>
                    <div class="health-bar">
                        <div class="health-fill" id="player-health"></div>
                    </div>
                </div>
                
                <div class="vs-indicator">VS</div>
                
                <div class="character">
                    <div class="character-avatar enemy-avatar" id="enemy-avatar">üëπ</div>
                    <h3 class="character-name" id="enemy-name">Inimigo</h3>
                    <div class="health-bar">
                        <div class="health-fill enemy-health" id="enemy-health"></div>
                    </div>
                </div>
            </div>
            
            <div class="combat-log" id="combat-log">
                <p>O combate est√° come√ßando! Prepare-se para lutar!</p>
            </div>
            
            <div class="combat-actions">
                <button class="combat-button" id="attack-button">Atacar</button>
                <button class="combat-button" id="defend-button">Defender</button>
                <button class="combat-button special-button" id="special-button">Ataque Especial</button>
                <button class="combat-button item-button" id="item-button">Usar Item</button>
            </div>
        </div>
    </div>
    
    <!-- Tela de Resultado (Vit√≥ria/Derrota) -->
    <div id="result-screen">
        <h2 class="result-title" id="result-title">Resultado</h2>
        <p class="result-text" id="result-text">Texto do resultado aqui</p>
        <div>
            <button class="result-button" id="continue-button">Continuar</button>
            <button class="result-button" id="restart-button">Reiniciar</button>
        </div>
    </div>
    
    <script>
        // ===== DADOS DA HIST√ìRIA =====
        // Aqui √© onde definimos todas as p√°ginas da hist√≥ria, com texto e escolhas
        const storyData = {
            // Primeira p√°gina da hist√≥ria
            "start": {
                title: "O In√≠cio da Jornada",
                text: `Voc√™ acorda em um quarto estranho, os raios de sol entrando pela janela empoeirada. Este n√£o √© seu quarto habitual.

Na parede √† sua frente, h√° um mapa com v√°rios pontos marcados em vermelho. Ao lado da cama, uma mesa com tr√™s objetos: uma chave antiga, um livro com s√≠mbolos estranhos e uma lanterna que parece funcional.

Voc√™ tenta se lembrar como chegou aqui, mas sua mente est√° completamente em branco. A √∫nica certeza √© que precisa descobrir onde est√° e como voltar para casa.

Ao olhar pela janela, voc√™ v√™ uma floresta densa e, ao longe, o que parece ser uma torre.

O que voc√™ faz agora?`,
                choices: [
                    { text: "Pegar a chave e tentar sair do quarto", nextPage: "hall" },
                    { text: "Examinar o livro com s√≠mbolos estranhos", nextPage: "book" },
                    { text: "Pegar a lanterna e olhar embaixo da cama", nextPage: "under_bed" }
                ]
            },
            
            "hall": {
                title: "O Corredor Misterioso",
                text: `Voc√™ pega a chave e se dirige √† porta. Ela range ao abrir, revelando um longo corredor com v√°rias outras portas.

O corredor √© iluminado por tochas que lan√ßam sombras inquietantes nas paredes de pedra. No ch√£o, um tapete vermelho leva at√© o final do corredor, onde h√° uma porta maior que as outras.

Enquanto caminha pelo corredor, voc√™ ouve sussurros vindo de tr√°s das portas. Algumas palavras s√£o intelig√≠veis: "...escolhido..." e "...destino..." parecem se repetir.

No meio do corredor, uma das portas est√° entreaberta.`,
                choices: [
                    { text: "Verificar a porta entreaberta", nextPage: "strange_room" },
                    { text: "Continuar at√© a porta grande no final do corredor", nextPage: "grand_door" },
                    { text: "Voltar ao quarto para pegar os outros objetos", nextPage: "start" }
                ]
            },
            
            "book": {
                title: "O Livro Misterioso",
                text: `Voc√™ pega o livro e o examina. Sua capa √© feita de um material que parece couro, mas tem uma textura estranha, quase viva ao toque.

Ao abri-lo, voc√™ descobre que n√£o consegue entender a maioria dos s√≠mbolos, mas algumas imagens s√£o claras: uma torre, uma √°rvore gigante e o que parece ser um ritual com pessoas em c√≠rculo.

Em uma das p√°ginas, h√° um mapa que se assemelha ao terreno que voc√™ viu pela janela. A torre est√° marcada com um X vermelho.

De repente, os s√≠mbolos come√ßam a brilhar levemente, e voc√™ percebe que algumas letras est√£o se tornando leg√≠veis, como se o livro estivesse se adaptando a voc√™.

"Aquele que l√™ estas palavras foi escolhido para restaurar o equil√≠brio. A torre guarda o segredo, mas apenas o digno poder√° entrar."`,
                choices: [
                    { text: "Levar o livro e tentar sair do quarto", nextPage: "hall_with_book" },
                    { text: "Procurar mais informa√ß√µes no livro sobre a torre", nextPage: "tower_info" },
                    { text: "Colocar o livro de volta e examinar a lanterna", nextPage: "lantern" }
                ]
            },
            
            "under_bed": {
                title: "Segredo Sob a Cama",
                text: `Voc√™ pega a lanterna e se ajoelha para olhar embaixo da cama. Ao ligar a lanterna, seu feixe de luz revela uma pequena porta no ch√£o.

√â uma escotilha de madeira com um puxador de metal. N√£o parece estar trancada.

Ao redor da escotilha, h√° s√≠mbolos entalhados no ch√£o de madeira, semelhantes aos do livro sobre a mesa.

Voc√™ tamb√©m nota algumas pegadas empoeiradas que v√£o da cama at√© a parede do outro lado do quarto.`,
                choices: [
                    { text: "Abrir a escotilha e ver onde leva", nextPage: "trapdoor" },
                    { text: "Seguir as pegadas empoeiradas", nextPage: "secret_wall" },
                    { text: "Voltar e examinar os outros objetos", nextPage: "start" }
                ]
            },
            
            "strange_room": {
                title: "A Sala Estranha",
                text: `Voc√™ empurra suavemente a porta entreaberta, que range ao se abrir completamente.

A sala √© circular e menor que o quarto onde voc√™ acordou. No centro, h√° uma mesa redonda com um tabuleiro que parece um jogo de xadrez, mas com pe√ßas estranhas e posi√ß√µes que desafiam a l√≥gica.

Nas paredes, tape√ßarias antigas retratam batalhas entre criaturas que voc√™ nunca viu antes. Uma das tape√ßarias mostra a mesma torre que voc√™ viu pela janela.

Um homem idoso est√° sentado do outro lado do tabuleiro. Ele levanta os olhos, como se estivesse esperando por voc√™.

"Ah, finalmente voc√™ chegou. Estive esperando. Quer jogar uma partida? Ou talvez prefira algumas respostas primeiro?"`,
                choices: [
                    { text: "Aceitar jogar o jogo estranho", nextPage: "combat", enemy: "Mestre do Jogo", difficulty: "medium" },
                    { text: "Pedir respostas ao homem idoso", nextPage: "old_man_answers" },
                    { text: "Sair discretamente e continuar pelo corredor", nextPage: "hall_continue" }
                ]
            },
            
            "grand_door": {
                title: "A Grande Porta",
                text: `Voc√™ chega √† grande porta no final do corredor. √â feita de madeira maci√ßa com detalhes em metal que formam desenhos complexos.

A porta n√£o tem ma√ßaneta vis√≠vel, apenas um pequeno orif√≠cio que parece ser para uma chave.

Ao lado da porta, um pedestal de pedra sustenta uma tigela com √°gua cristalina. Reflexos dan√ßam na superf√≠cie da √°gua, mostrando imagens r√°pidas de lugares diferentes: a torre, uma caverna, uma cidade antiga.

Voc√™ se lembra da chave em seu bolso.`,
                choices: [
                    { text: "Usar a chave no orif√≠cio da porta", nextPage: "key_door" },
                    { text: "Tocar na √°gua para ver melhor as imagens", nextPage: "water_visions" },
                    { text: "Voltar e verificar a porta entreaberta", nextPage: "strange_room" }
                ]
            },
            
            "hall_with_book": {
                title: "Corredor com o Livro",
                text: `Voc√™ sai do quarto com o livro misterioso em m√£os. O corredor √© exatamente como descrito antes, com portas m√∫ltiplas e tochas nas paredes.

Enquanto caminha, o livro em suas m√£os come√ßa a esquentar levemente. P√°ginas viram sozinhas at√© parar em uma que mostra o desenho do corredor onde voc√™ est√°.

Na p√°gina, h√° uma indica√ß√£o para a terceira porta √† direita, marcada com um s√≠mbolo que brilha suavemente. Olhando para o corredor, voc√™ v√™ que a porta real tamb√©m tem o mesmo s√≠mbolo, quase impercept√≠vel, mas que agora parece brilhar em sintonia com o livro.`,
                choices: [
                    { text: "Abrir a terceira porta √† direita", nextPage: "symbol_door" },
                    { text: "Continuar at√© o final do corredor", nextPage: "grand_door_book" },
                    { text: "Voltar ao quarto para pegar os outros objetos", nextPage: "start_with_book" }
                ]
            },
            
            "tower_info": {
                title: "Segredos da Torre",
                text: `Voc√™ folheia o livro, concentrando-se nas p√°ginas que mostram a torre. √Ä medida que seu interesse se intensifica, mais palavras se tornam leg√≠veis.

"A Torre dos Sete Ventos guarda o Portal entre os mundos. Constru√≠da pelos Antigos para manter o equil√≠brio entre realidades, agora est√° sob o controle do Guardi√£o Corrompido.

O Guardi√£o era uma vez um protetor, mas o poder da torre o transformou. Ele coleciona viajantes perdidos entre os mundos, drenando suas mem√≥rias e ess√™ncias para fortalecer o selo que mant√©m o Portal sob seu controle.

Existem tr√™s chaves para desafiar o Guardi√£o: a Chave de Prata que abre o port√£o exterior, o Medalh√£o de √Çmbar que revela as passagens ocultas, e a Palavra Antiga que desarma as defesas m√°gicas."

O livro tamb√©m menciona que o Guardi√£o n√£o pode ser derrotado pela for√ßa, apenas pela sabedoria e pelo sacrif√≠cio.`,
                choices: [
                    { text: "Levar o livro e sair do quarto", nextPage: "hall_with_book" },
                    { text: "Procurar informa√ß√µes sobre as tr√™s chaves", nextPage: "keys_info" },
                    { text: "Fechar o livro e examinar os outros objetos", nextPage: "start_after_reading" }
                ]
            },
            
            "lantern": {
                title: "A Lanterna Misteriosa",
                text: `Voc√™ coloca o livro de volta na mesa e pega a lanterna. N√£o parece ser uma lanterna comum - √© feita de um metal escuro com entalhes delicados que lembram constela√ß√µes.

Ao lig√°-la, em vez de um feixe de luz normal, ela projeta pequenos pontos de luz no teto que formam um mapa estelar.

Conforme seus olhos se ajustam, voc√™ percebe que o mapa estelar mostra uma configura√ß√£o que voc√™ nunca viu antes, com uma estrela brilhante no centro que parece pulsar.

Intrigado, voc√™ move a lanterna e nota que o mapa muda, revelando diferentes "c√©us". Uma posi√ß√£o espec√≠fica faz com que uma das estrelas brilhe intensamente, projetando um raio de luz que aponta para a parede do quarto.`,
                choices: [
                    { text: "Seguir o raio de luz at√© a parede", nextPage: "secret_wall" },
                    { text: "Usar a lanterna para olhar embaixo da cama", nextPage: "under_bed" },
                    { text: "Pegar a lanterna e tentar sair do quarto", nextPage: "hall_with_lantern" }
                ]
            },
            
            "trapdoor": {
                title: "A Escotilha Secreta",
                text: `Voc√™ puxa a escotilha, que se abre com um rangido baixo, revelando uma escada que desce para a escurid√£o.

O ar que vem de baixo √© fresco e tem um leve cheiro de terra √∫mida. Voc√™ direciona a lanterna para baixo e v√™ que a escada leva a um t√∫nel.

Decidindo explorar, voc√™ desce cuidadosamente. O t√∫nel √© estreito, com ra√≠zes ocasionais pendendo do teto. Ap√≥s alguns minutos de caminhada, voc√™ chega a uma bifurca√ß√£o.

√Ä esquerda, o t√∫nel continua, com o que parece ser luz natural ao longe. √Ä direita, h√° uma porta de madeira com o mesmo s√≠mbolo que voc√™ viu no livro sobre a mesa.`,
                choices: [
                    { text: "Seguir o t√∫nel √† esquerda em dire√ß√£o √† luz", nextPage: "tunnel_exit" },
                    { text: "Abrir a porta de madeira √† direita", nextPage: "symbol_chamber" },
                    { text: "Voltar ao quarto para pegar os outros objetos", nextPage: "start_after_trapdoor" }
                ]
            },
            
            "secret_wall": {
                title: "A Parede Secreta",
                text: `Voc√™ segue as pegadas empoeiradas at√© a parede. √Ä primeira vista, parece ser uma parede normal, mas examinando mais de perto, voc√™ nota pequenas diferen√ßas na textura.

Passando a m√£o sobre a superf√≠cie, voc√™ sente um leve tremor. De repente, uma se√ß√£o da parede desliza para o lado, revelando uma passagem secreta.

A passagem leva a uma pequena sala com prateleiras cheias de livros antigos, frascos com subst√¢ncias coloridas e v√°rios artefatos estranhos.

No centro da sala, h√° uma mesa com um mapa detalhado da regi√£o. A torre est√° marcada, assim como v√°rios outros locais com s√≠mbolos diferentes. H√° tamb√©m uma mochila que parece estar preparada para uma viagem.`,
                choices: [
                    { text: "Examinar o mapa detalhadamente", nextPage: "detailed_map" },
                    { text: "Verificar o conte√∫do da mochila", nextPage: "backpack" },
                    { text: "Olhar os livros e artefatos nas prateleiras", nextPage: "artifacts" }
                ]
            },
            
            "old_man_answers": {
                title: "Respostas do Anci√£o",
                text: `"Perguntas, sempre perguntas," diz o homem idoso com um sorriso ir√¥nico. "Mas nem sempre as respostas s√£o o que queremos ouvir."

Ele gesticula para que voc√™ se sente √† sua frente.

"Voc√™ est√° em Limbrethil, um reino entre os mundos. N√£o √© nem seu mundo nem completamente outro. √â um lugar de transi√ß√£o, de testes."

O homem aponta para a janela, onde a torre √© vis√≠vel ao longe.

"Aquela √© a Torre dos Sete Ventos, o centro de Limbrethil. √â de l√° que o Guardi√£o observa e controla as passagens entre os mundos. Se deseja voltar para casa, precisar√° chegar √† torre e confrontar o Guardi√£o."

Ele faz uma pausa, olhando profundamente em seus olhos.

"Mas saiba que o Guardi√£o n√£o deixar√° voc√™ passar facilmente. Ele se alimenta de viajantes perdidos como voc√™, coletando suas mem√≥rias. √â por isso que voc√™ n√£o se lembra como chegou aqui - ele j√° come√ßou a drenar voc√™."`,
                choices: [
                    { text: "Perguntar como derrotar o Guardi√£o", nextPage: "guardian_info" },
                    { text: "Perguntar sobre o jogo de tabuleiro", nextPage: "game_info" },
                    { text: "Agradecer e sair para continuar pelo corredor", nextPage: "hall_continue" }
                ]
            },
            
            "hall_continue": {
                title: "Continuando pelo Corredor",
                text: `Voc√™ deixa a sala do homem idoso e continua pelo corredor. Os sussurros atr√°s das portas parecem mais intensos agora, como se sua presen√ßa tivesse agitado os habitantes ocultos.

Mais √† frente, voc√™ nota algo estranho: uma das tochas nas paredes n√£o est√° emitindo luz, mas sim uma esp√©cie de escurid√£o que parece engolir o ar ao redor.

Ao passar por ela, voc√™ sente um arrepio percorrer sua espinha, como se algo estivesse observando voc√™ das sombras.

O final do corredor est√° pr√≥ximo, com a grande porta ainda aguardando.`,
                choices: [
                    { text: "Examinar a tocha estranha", nextPage: "dark_torch" },
                    { text: "Apressar-se para a grande porta no final", nextPage: "grand_door" },
                    { text: "Voltar para falar novamente com o homem idoso", nextPage: "strange_room_return" }
                ]
            },
            
            "key_door": {
                title: "A Chave e a Porta",
                text: `Voc√™ insere a chave no pequeno orif√≠cio da grande porta. Ela entra perfeitamente, e ao gir√°-la, voc√™ ouve um mecanismo complexo se movendo dentro da porta.

Com um clique final, a porta come√ßa a se abrir lentamente, revelando uma sala ampla al√©m. √â uma biblioteca circular, com estantes que v√£o do ch√£o ao teto, cheias de livros de todos os tamanhos e cores.

No centro da biblioteca, h√° um pedestal com um grande livro aberto e, ao lado dele, uma figura encapuzada est√° parada, de costas para voc√™.

√Ä medida que a porta termina de se abrir, a figura se vira lentamente. Sob o capuz, n√£o h√° um rosto, apenas uma m√°scara branca sem fei√ß√µes.

"Bem-vindo, Viajante," diz uma voz que parece vir de todos os lugares ao mesmo tempo. "Eu sou o Bibliotec√°rio. O que voc√™ busca no Reposit√≥rio do Conhecimento?"`,
                choices: [
                    { text: "Perguntar sobre a torre e o Guardi√£o", nextPage: "librarian_tower" },
                    { text: "Pedir ajuda para recuperar suas mem√≥rias", nextPage: "librarian_memories" },
                    { text: "Perguntar como voltar para casa", nextPage: "librarian_home" }
                ]
            },
            
            "water_visions": {
                title: "Vis√µes na √Ågua",
                text: `Voc√™ se inclina sobre a tigela e toca suavemente a superf√≠cie da √°gua. Ao fazer isso, a √°gua come√ßa a brilhar e as imagens se tornam mais n√≠tidas, como uma janela para outros lugares.

De repente, voc√™ se sente puxado para dentro das vis√µes. Sua consci√™ncia parece flutuar entre as cenas:

Voc√™ v√™ a torre de perto, seus port√µes guardados por est√°tuas que giram a cabe√ßa quando algu√©m se aproxima.

Voc√™ est√° em uma caverna cristalina, onde cristais ressoam com melodias et√©reas.

Voc√™ caminha por uma cidade antiga com arquitetura imposs√≠vel, onde edif√≠cios se dobram sobre si mesmos.

Ent√£o, voc√™ v√™ a si mesmo, dormindo em sua pr√≥pria cama em seu mundo, como se estivesse vendo seu corpo f√≠sico que deixou para tr√°s.

Com um sobressalto, voc√™ √© puxado de volta ao corredor, mas agora com um conhecimento que n√£o possu√≠a antes: voc√™ n√£o est√° realmente aqui. Seu corpo f√≠sico ainda est√° em seu mundo, e o que est√° experimentando √© uma esp√©cie de viagem astral ou sonho consciente.`,
                choices: [
                    { text: "Usar a chave na porta, com esse novo conhecimento", nextPage: "key_door_aware" },
                    { text: "Voltar √† sala do homem idoso para confront√°-lo", nextPage: "confront_old_man" },
                    { text: "Tentar acordar ou controlar o 'sonho'", nextPage: "lucid_dream" }
                ]
            },
            
            "symbol_door": {
                title: "A Porta do S√≠mbolo",
                text: `Voc√™ se aproxima da terceira porta √† direita, onde o s√≠mbolo agora brilha claramente. Ao tocar na porta, ela se abre suavemente, sem qualquer som.

Dentro, voc√™ encontra uma sala circular muito semelhante √† sala do homem idoso, mas sem ningu√©m presente. No centro h√° o mesmo tabuleiro de jogo estranho, mas as pe√ßas est√£o organizadas de forma diferente.

Nas paredes, em vez de tape√ßarias, h√° espelhos que n√£o refletem corretamente - cada um mostra voc√™ de forma ligeiramente diferente, como vers√µes alternativas de si mesmo.

No ch√£o ao redor do tabuleiro, h√° um c√≠rculo de runas que brilham suavemente. O livro em suas m√£os se abre sozinho em uma p√°gina com instru√ß√µes sobre um ritual.`,
                choices: [
                    { text: "Sentar e estudar o tabuleiro de jogo", nextPage: "study_game" },
                    { text: "Examinar os espelhos nas paredes", nextPage: "mirrors" },
                    { text: "Tentar realizar o ritual descrito no livro", nextPage: "ritual" }
                ]
            },
            
            "grand_door_book": {
                title: "A Grande Porta com o Livro",
                text: `Voc√™ chega √† grande porta no final do corredor, ainda segurando o livro misterioso. Assim como antes, a porta √© imponente, sem ma√ßaneta vis√≠vel, apenas com um orif√≠cio para chave.

O livro em suas m√£os come√ßa a pulsar mais intensamente. Ao olh√°-lo, voc√™ v√™ que abriu em uma p√°gina que mostra um desenho da pr√≥pria porta. No desenho, h√° uma indica√ß√£o de um s√≠mbolo espec√≠fico que deve ser pressionado na moldura da porta.

Examinando a moldura real, voc√™ encontra o s√≠mbolo escondido entre os detalhes decorativos.`,
                choices: [
                    { text: "Pressionar o s√≠mbolo na moldura da porta", nextPage: "hidden_entrance" },
                    { text: "Usar a chave no orif√≠cio da porta", nextPage: "key_door_book" },
                    { text: "Voltar e verificar a porta marcada com o s√≠mbolo", nextPage: "symbol_door" }
                ]
            },
            
            "start_with_book": {
                title: "De Volta ao Quarto com o Livro",
                text: `Voc√™ retorna ao quarto onde acordou, ainda segurando o livro misterioso. Os outros objetos ainda est√£o sobre a mesa: a chave antiga e a lanterna.

Ao aproximar o livro da chave, voc√™ percebe que algumas p√°ginas come√ßam a brilhar. Folheando at√© essas p√°ginas, descobre informa√ß√µes sobre "A Chave de Prata", que aparentemente abre o port√£o exterior da Torre dos Sete Ventos.

O livro sugere que esta chave √© apenas o primeiro passo - voc√™ precisar√° de mais itens e conhecimento para chegar ao cora√ß√£o da torre e confrontar o Guardi√£o.`,
                choices: [
                    { text: "Pegar a chave e sair do quarto", nextPage: "hall_with_book_key" },
                    { text: "Examinar a lanterna com o conhecimento do livro", nextPage: "lantern_book" },
                    { text: "Olhar embaixo da cama como sugerido em uma p√°gina do livro", nextPage: "under_bed_book" }
                ]
            },
            
            "keys_info": {
                title: "As Tr√™s Chaves",
                text: `Voc√™ continua lendo sobre as tr√™s chaves necess√°rias para desafiar o Guardi√£o:

"A Chave de Prata foi forjada pelo primeiro Viajante a encontrar a torre. Ela abre o port√£o exterior e √© frequentemente o primeiro objeto que os novos Viajantes encontram, como um convite ou desafio.

O Medalh√£o de √Çmbar cont√©m a ess√™ncia dos sonhos cristalizados de cem Viajantes que escolheram ficar em Limbrethil. Ele revela passagens ocultas e verdades invis√≠veis aos olhos comuns. O Medalh√£o est√° guardado pelo Bibliotec√°rio no Reposit√≥rio do Conhecimento.

A Palavra Antiga n√£o √© um objeto f√≠sico, mas um conhecimento sagrado. √â uma palavra de poder na l√≠ngua dos Antigos que desarma as defesas m√°gicas da torre. Esta palavra s√≥ pode ser aprendida atrav√©s de uma prova de sabedoria administrada pelo Or√°culo dos Caminhos."

O livro tamb√©m menciona que apenas um Viajante que possui as tr√™s chaves pode esperar enfrentar o Guardi√£o com alguma chance de sucesso.`,
                choices: [
                    { text: "Procurar informa√ß√µes sobre o Bibliotec√°rio", nextPage: "librarian_info" },
                    { text: "Procurar informa√ß√µes sobre o Or√°culo", nextPage: "oracle_info" },
                    { text: "Fechar o livro e explorar o quarto", nextPage: "start_after_reading" }
                ]
            },
            
            "start_after_reading": {
                title: "Explorando Ap√≥s a Leitura",
                text: `Depois de obter valiosas informa√ß√µes do livro, voc√™ o coloca de volta na mesa e olha ao redor do quarto com novos olhos.

A chave na mesa deve ser a Chave de Prata mencionada no livro. Voc√™ nota que a lanterna tem detalhes em √¢mbar que n√£o tinha percebido antes - talvez uma pista relacionada ao Medalh√£o de √Çmbar?

A janela que mostra a torre ao longe agora parece mais significativa - aquele √© seu destino final, mas voc√™ sabe que precisar√° se preparar adequadamente antes de enfrent√°-la.`,
                choices: [
                    { text: "Pegar a chave e a lanterna, e sair do quarto", nextPage: "hall_prepared" },
                    { text: "Olhar embaixo da cama em busca de mais pistas", nextPage: "under_bed" },
                    { text: "Examinar mais atentamente a janela e a vista da torre", nextPage: "window_view" }
                ]
            },
            
            "hall_with_lantern": {
                title: "Corredor com a Lanterna",
                text: `Voc√™ sai para o corredor segurando a lanterna misteriosa. As tochas nas paredes continuam lan√ßando suas sombras inquietantes, mas a luz estelar da sua lanterna adiciona uma camada surreal ao ambiente.

Ao apontar a lanterna para diferentes partes do corredor, voc√™ nota que certos pontos fazem a luz reagir de forma diferente. Pr√≥ximo a uma das portas, os pontos de luz se concentram e formam uma constela√ß√£o espec√≠fica.

Intrigado, voc√™ move a lanterna para outras √°reas e descobre que duas outras portas tamb√©m provocam rea√ß√µes similares, cada uma formando uma constela√ß√£o diferente.`,
                choices: [
                    { text: "Abrir a porta marcada pela primeira constela√ß√£o", nextPage: "constellation_door1" },
                    { text: "Examinar as outras portas que reagem √† lanterna", nextPage: "constellation_doors" },
                    { text: "Continuar at√© o final do corredor com a lanterna", nextPage: "grand_door_lantern" }
                ]
            },
            
            "tunnel_exit": {
                title: "A Sa√≠da do T√∫nel",
                text: `Voc√™ segue o t√∫nel √† esquerda, em dire√ß√£o √† luz que viu. Ap√≥s alguns minutos de caminhada, o t√∫nel come√ßa a subir gradualmente e a luz fica mais forte.

Finalmente, voc√™ emerge em uma pequena clareira na floresta. A torre que viu pela janela est√° muito mais pr√≥xima agora, talvez a algumas horas de caminhada.

A floresta ao seu redor √© densa, com √°rvores enormes que parecem antigas como o pr√≥prio mundo. Raios de sol penetram entre as folhas, criando padr√µes dan√ßantes no ch√£o coberto de musgo.

N√£o muito longe, voc√™ v√™ o que parece ser um caminho trilhado, como se outras pessoas tivessem passado por aqui recentemente.`,
                choices: [
                    { text: "Seguir o caminho trilhado", nextPage: "forest_path" },
                    { text: "Caminhar diretamente em dire√ß√£o √† torre", nextPage: "towards_tower" },
                    { text: "Voltar ao t√∫nel para explorar o outro caminho", nextPage: "return_to_fork" }
                ]
            },
            
            "symbol_chamber": {
                title: "A C√¢mara do S√≠mbolo",
                text: `Voc√™ abre a porta de madeira √† direita e entra em uma c√¢mara pequena e circular. O s√≠mbolo que voc√™ viu no livro est√° entalhado no centro do piso de pedra, muito maior e mais detalhado.

A c√¢mara √© iluminada por cristais azuis que crescem das paredes, emitindo uma luz suave e pulsante. N√£o h√° outros m√≥veis ou objetos, apenas um pedestal no centro, sobre o s√≠mbolo.

No pedestal, h√° um medalh√£o de √¢mbar com o mesmo s√≠mbolo entalhado. √Ä medida que voc√™ se aproxima, o medalh√£o come√ßa a brilhar em sincronia com os cristais nas paredes.

Voc√™ se lembra da informa√ß√£o do livro sobre o Medalh√£o de √Çmbar, uma das tr√™s chaves necess√°rias para desafiar o Guardi√£o da torre.`,
                choices: [
                    { text: "Pegar o Medalh√£o de √Çmbar", nextPage: "take_medallion" },
                    { text: "Examinar mais detalhadamente o s√≠mbolo no ch√£o", nextPage: "floor_symbol" },
                    { text: "Sair da c√¢mara e voltar √† bifurca√ß√£o", nextPage: "return_to_fork" }
                ]
            },
            
            "detailed_map": {
                title: "O Mapa Detalhado",
                text: `Voc√™ se debru√ßa sobre o mapa na mesa, estudando seus detalhes. √â muito mais completo que o vislumbre que teve do terreno pela janela.

A Torre dos Sete Ventos √© claramente marcada no centro, mas h√° muitos outros locais interessantes:

Um c√≠rculo de pedras chamado "O Conclave dos Antigos" fica a nordeste.
Uma regi√£o de cavernas cristalinas chamada "As C√¢maras de Eco" est√° marcada a oeste.
Uma pequena vila chamada "Ref√∫gio dos Perdidos" aparece ao sul.
Um grande lago com uma ilha no centro, chamado "Espelho dos Mundos" est√° a leste.

Cada local tem anota√ß√µes escritas em uma caligrafia delicada, descrevendo caracter√≠sticas e poss√≠veis perigos. H√° tamb√©m rotas tra√ßadas entre eles, algumas marcadas como seguras e outras com avisos de perigo.

Ao lado do mapa, h√° um pequeno caderno com mais detalhes sobre cada local e hist√≥rias sobre outros viajantes que passaram por aqui.`,
                choices: [
                    { text: "Memorizar o mapa e verificar a mochila", nextPage: "backpack" },
                    { text: "Ler o caderno com hist√≥rias de outros viajantes", nextPage: "travelers_journal" },
                    { text: "Pegar o mapa e sair pela passagem secreta", nextPage: "leave_with_map" }
                ]
            },
            
            "backpack": {
                title: "Conte√∫do da Mochila",
                text: `Voc√™ abre a mochila e examina seu conte√∫do. Parece ter sido preparada para uma jornada por algu√©m que conhece bem os perigos deste mundo.

Dentro, voc√™ encontra:

Uma garrafa de √°gua que parece normal, mas tem um brilho sutil quando agitada.
Algumas frutas secas e nozes embrulhadas em folhas.
Um pequeno estojo com ervas medicinais rotuladas em uma l√≠ngua estranha.
Uma faca com uma l√¢mina que muda de cor dependendo do √¢ngulo da luz.
Uma b√∫ssola que, em vez de apontar para o norte, parece apontar para onde voc√™ mais deseja ir no momento.
Um caderno em branco com uma pena que n√£o precisa de tinta.

Tamb√©m h√° um bilhete no fundo da mochila, escrito com a mesma caligrafia do mapa:

"Para o pr√≥ximo Viajante: Use estes itens com sabedoria. A Torre chama a todos n√≥s, mas poucos retornam de seus sal√µes. Se est√° lendo isto, fui em frente. Talvez nos encontremos no caminho. -J"`,
                choices: [
                    { text: "Pegar a mochila e o mapa, e sair pela passagem", nextPage: "leave_with_gear" },
                    { text: "Examinar a b√∫ssola de desejos mais detalhadamente", nextPage: "desire_compass" },
                    { text: "Procurar mais informa√ß√µes sobre 'J' nos livros e artefatos", nextPage: "search_for_j" }
                ]
            },
            
            "artifacts": {
                title: "Livros e Artefatos",
                text: `Voc√™ examina as prateleiras repletas de livros antigos e artefatos curiosos. A cole√ß√£o √© impressionante e ecl√©tica, como se fosse reunida ao longo de muitos anos.

Alguns livros est√£o em l√≠nguas que voc√™ reconhece, outros em escritas completamente alien√≠genas. Os artefatos variam de pequenos cristais e estatuetas a dispositivos mec√¢nicos cujo prop√≥sito voc√™ n√£o consegue imaginar.

Um livro em particular chama sua aten√ß√£o - est√° aberto em uma mesa lateral e parece ser um di√°rio. As entradas mais recentes descrevem as experi√™ncias de algu√©m chamado Janus, que aparentemente est√° explorando este mundo h√° algum tempo.

Janus escreve sobre encontros com outras pessoas perdidas, sobre criaturas estranhas que vagam pelas √°reas mais selvagens, e sobre sua obsess√£o crescente com a Torre dos Sete Ventos.

A √∫ltima entrada √© preocupante:

"Finalmente descobri a Palavra Antiga. O Or√°culo foi... diferente do que eu esperava. Agora tenho as tr√™s chaves. Amanh√£ irei √† Torre. Se n√£o retornar, que o pr√≥ximo Viajante aprenda com meus erros."`,
                choices: [
                    { text: "Procurar mais informa√ß√µes sobre o Or√°culo", nextPage: "oracle_search" },
                    { text: "Verificar os artefatos em busca de algo √∫til", nextPage: "useful_artifacts" },
                    { text: "Pegar o di√°rio de Janus e a mochila, e partir", nextPage: "leave_with_journal" }
                ]
            },
            
            "guardian_info": {
                title: "Segredos do Guardi√£o",
                text: `O homem idoso suspira profundamente antes de falar, como se pesasse suas palavras cuidadosamente.

"O Guardi√£o n√£o √© o que parece. Ele j√° foi um Viajante como voc√™, muitos ciclos atr√°s. Ele chegou √† torre buscando retornar ao seu mundo, mas descobriu o poder que ela oferecia - o controle sobre as passagens entre mundos."

O homem se levanta e caminha at√© uma das tape√ßarias, apontando para uma figura central.

"Ele escolheu ficar e assumiu o papel de Guardi√£o, mas o poder corrompeu seu prop√≥sito. Agora, ele se alimenta da ess√™ncia dos Viajantes para manter seu dom√≠nio. Cada mem√≥ria que ele coleta fortalece seu controle sobre Limbrethil."

Voltando a se sentar, ele continua:

"Para derrot√°-lo, voc√™ precisar√° das tr√™s chaves: a Chave de Prata, o Medalh√£o de √Çmbar e a Palavra Antiga. Mas mesmo com elas, a for√ßa bruta n√£o ser√° suficiente. Voc√™ precisar√° usar o pr√≥prio poder do Guardi√£o contra ele."

O homem sorri enigmaticamente.

"H√° uma raz√£o pela qual ele coleta mem√≥rias, sabe? Cada mem√≥ria cont√©m um fragmento de outro mundo, outras possibilidades. Se voc√™ puder recuperar suas pr√≥prias mem√≥rias antes de enfrent√°-lo, talvez possa usar esse conhecimento para abrir um caminho de volta."`,
                choices: [
                    { text: "Perguntar onde encontrar as tr√™s chaves", nextPage: "keys_locations" },
                    { text: "Perguntar como recuperar suas mem√≥rias", nextPage: "recover_memories" },
                    { text: "Agradecer e continuar sua jornada", nextPage: "hall_continue" }
                ]
            },
            
            "game_info": {
                title: "O Jogo de Tabuleiro",
                text: `O homem idoso sorri ao ver seu interesse no estranho tabuleiro entre voc√™s.

"Isso? √â o Jogo dos Caminhos. Um reflexo de Limbrethil em miniatura, se preferir."

Ele move suavemente uma das pe√ßas - que parece vagamente humana, mas com detalhes que mudam quando voc√™ tenta focaliz√°-los.

"Cada pe√ßa representa um Viajante ou um guardi√£o de conhecimento. Cada movimento representa uma escolha. O objetivo n√£o √© necessariamente vencer, mas encontrar o caminho correto atrav√©s do tabuleiro."

Ele olha para voc√™ com interesse renovado.

"Gostaria de jogar? Poderia ser... educativo. Se conseguir avan√ßar sua pe√ßa at√© a torre no centro, eu lhe darei uma informa√ß√£o valiosa sobre como recuperar suas mem√≥rias."

Olhando para o tabuleiro, voc√™ percebe que √© incrivelmente complexo, com zonas de diferentes cores e s√≠mbolos que parecem mudar sutilmente quando n√£o est√° olhando diretamente para eles.`,
                choices: [
                    { text: "Aceitar o desafio e jogar", nextPage: "combat", enemy: "Mestre do Jogo", difficulty: "medium" },
                    { text: "Perguntar mais sobre as regras antes de decidir", nextPage: "game_rules" },
                    { text: "Recusar educadamente e perguntar sobre a torre", nextPage: "guardian_info" }
                ]
            },
            
            "game_rules": {
                title: "Regras do Jogo dos Caminhos",
                text: `"As regras s√£o simples na superf√≠cie, mas infinitamente complexas nas nuances," explica o homem idoso, movendo as pe√ßas para suas posi√ß√µes iniciais.

"Voc√™ controla esta pe√ßa" - ele aponta para uma figura que, por um momento, parece ter seu rosto - "e seu objetivo √© chegar √† torre no centro do tabuleiro."

Ele indica os diferentes setores do tabuleiro.

"Cada √°rea representa um aspecto de Limbrethil. As Florestas do Esquecimento, o Mar de Mem√≥rias, as Montanhas do Desafio... Cada uma tem suas pr√≥prias regras de movimento e desafios."

Ele coloca v√°rias pe√ßas de apar√™ncia amea√ßadora em diferentes pontos do tabuleiro.

"Estes s√£o os Guardi√µes. Eles patrulham seus territ√≥rios, tentando impedir sua passagem. Se um deles alcan√ßar sua pe√ßa, voc√™ enfrentar√° um desafio. Super√°-lo permite que continue; falhar significa recuar."

O homem sorri, seus olhos brilhando com conhecimento antigo.

"H√° tamb√©m atalhos e passagens secretas a serem descobertos, aliados a serem recrutados, e itens a serem coletados. E claro, h√° sempre mais de um caminho para a torre."`,
                choices: [
                    { text: "Aceitar o desafio e come√ßar a jogar", nextPage: "combat", enemy: "Mestre do Jogo", difficulty: "medium" },
                    { text: "Perguntar se h√° uma maneira de trapacear ou contornar as regras", nextPage: "game_cheat" },
                    { text: "Agradecer pela explica√ß√£o, mas decidir seguir seu caminho", nextPage: "hall_continue" }
                ]
            },
            
            "librarian_tower": {
                title: "O Bibliotec√°rio e a Torre",
                text: `A figura encapuzada com a m√°scara branca permanece im√≥vel por um momento, como se estivesse consultando algum vasto cat√°logo mental.

"A Torre dos Sete Ventos," diz o Bibliotec√°rio, sua voz ecoando de forma n√£o natural, "√© o axis mundi de Limbrethil. Ela conecta todos os mundos, todos os reinos de possibilidade."

O Bibliotec√°rio flutua at√© uma das estantes e retira um livro antigo, que abre sem tocar. P√°ginas viram sozinhas at√© parar em uma ilustra√ß√£o detalhada da torre.

"O Guardi√£o atual n√£o √© o primeiro, nem ser√° o √∫ltimo. Ele mant√©m o equil√≠brio entre os mundos, embora seus m√©todos sejam... question√°veis. Ele coleta mem√≥rias, ess√™ncias e potenciais de Viajantes como voc√™, usando esse poder para fortalecer as barreiras entre os mundos."

O livro flutua at√© voc√™, mostrando diagramas da torre - sete n√≠veis, cada um representando um aspecto diferente da realidade.

"Para desafiar o Guardi√£o, voc√™ precisar√° das tr√™s chaves. Vejo que j√° possui a Chave de Prata. O Medalh√£o de √Çmbar..."

O Bibliotec√°rio pausa, inclinando levemente a cabe√ßa.

"...est√° sob minha prote√ß√£o, como um dos tesouros do Reposit√≥rio. Quanto √† Palavra Antiga, apenas o Or√°culo dos Caminhos pode conced√™-la, e apenas para aqueles que provarem ser dignos."`,
                choices: [
                    { text: "Pedir ao Bibliotec√°rio o Medalh√£o de √Çmbar", nextPage: "ask_medallion" },
                    { text: "Perguntar sobre a localiza√ß√£o do Or√°culo", nextPage: "oracle_location" },
                    { text: "Perguntar sobre o Guardi√£o atual", nextPage: "current_guardian" }
                ]
            },
            
            "librarian_memories": {
                title: "Em Busca de Mem√≥rias Perdidas",
                text: `A m√°scara branca do Bibliotec√°rio parece estudar voc√™ atentamente, apesar de n√£o ter olhos vis√≠veis.

"Mem√≥rias perdidas... sim, uma queixa comum entre os Viajantes. O Guardi√£o se alimenta delas, sabia? Um m√©todo eficiente de manter os Viajantes desorientados e obter poder ao mesmo tempo."

O Bibliotec√°rio flutua at√© uma se√ß√£o particular da biblioteca e gesticula. Um livro de capa azul profundo voa da prateleira para suas m√£os. Ele o abre, revelando p√°ginas em branco.

"Este √© seu Livro de Mem√≥rias, Viajante. Vazio, como pode ver. O Guardi√£o tem suas mem√≥rias armazenadas na torre."

Ele passa as p√°ginas vazias lentamente.

"No entanto, h√° formas de recuperar fragmentos. Mem√≥rias poderosas deixam ecos, mesmo quando removidas. Lugares significativos, objetos pessoais, encontros emocionais - todos podem desencadear esses ecos."

O Bibliotec√°rio retorna o livro √† prateleira.

"H√° tamb√©m o Po√ßo de Reflexos, no Espelho dos Mundos. Dizem que suas √°guas podem mostrar verdades ocultas e mem√≥rias perdidas para aqueles que sabem como olhar."`,
                choices: [
                    { text: "Perguntar mais sobre o Po√ßo de Reflexos", nextPage: "reflection_well" },
                    { text: "Perguntar sobre objetos que poderiam desencadear mem√≥rias", nextPage: "memory_objects" },
                    { text: "Pedir ajuda para chegar √† torre e confrontar o Guardi√£o", nextPage: "librarian_help" }
                ]
            },
            
            "librarian_home": {
                title: "O Caminho de Volta",
                text: `A figura encapuzada do Bibliotec√°rio fica im√≥vel por um momento, a m√°scara branca sem express√£o voltada para voc√™.

"Voltar para casa," diz ele, a voz ecoando de forma estranha. "Um desejo compartilhado por quase todos os Viajantes que chegam a Limbrethil."

O Bibliotec√°rio flutua at√© uma se√ß√£o distante da biblioteca e retorna com um livro que parece estar feito de luz solidificada.

"H√° duas formas de retornar ao seu mundo de origem. A primeira √© encontrar um Portal Natural - raros pontos de intersec√ß√£o entre os mundos que aparecem em ciclos imprevis√≠veis. Esperar por um que leve ao seu mundo pode levar... muito tempo."

Ele vira uma p√°gina do livro de luz, revelando uma ilustra√ß√£o da torre.

"A segunda forma √© atrav√©s da Torre dos Sete Ventos. No topo da torre, h√° uma c√¢mara chamada Nexus dos Caminhos, de onde o Guardi√£o pode abrir portais para qualquer mundo."

O Bibliotec√°rio fecha o livro, que desaparece em um lampejo.

"Para alcan√ßar o Nexus, voc√™ precisar√° das tr√™s chaves e enfrentar o Guardi√£o. Ele n√£o abrir√° um caminho voluntariamente - voc√™ precisar√° for√ß√°-lo ou negociar."`,
                choices: [
                    { text: "Perguntar sobre as tr√™s chaves", nextPage: "three_keys_info" },
                    { text: "Perguntar se h√° maneiras de negociar com o Guardi√£o", nextPage: "negotiate_guardian" },
                    { text: "Perguntar sobre os Portais Naturais", nextPage: "natural_portals" }
                ]
            },
            
            "negotiate_guardian": {
                title: "Negociando com o Guardi√£o",
                text: `A m√°scara branca do Bibliotec√°rio inclina-se levemente, como se considerando sua pergunta com interesse.

"Negociar com o Guardi√£o... uma abordagem incomum," diz ele, sua voz ecoando entre as estantes. "A maioria dos Viajantes tenta derrot√°-lo ou engan√°-lo. Poucos consideram a diplomacia."

O Bibliotec√°rio flutua at√© outra se√ß√£o e retorna com um pequeno livro de capa vermelha.

"Este √© o di√°rio de Elara, uma Viajante que chegou aqui h√° sete ciclos. Ela conseguiu uma audi√™ncia com o Guardi√£o sem confronto, oferecendo algo de valor em troca de sua passagem de volta."

Ele abre o di√°rio em uma p√°gina espec√≠fica e o entrega a voc√™.

"Elara descobriu que o Guardi√£o, apesar de seu poder, √© solit√°rio. A imortalidade e o isolamento t√™m seu pre√ßo. Ela ofereceu mem√≥rias - n√£o as suas pr√≥prias, mas as que coletou em suas viagens por Limbrethil. Hist√≥rias, experi√™ncias, conhecimentos que ele n√£o poderia obter de outra forma."

O Bibliotec√°rio faz uma pausa significativa.

"O Guardi√£o aceitou sua oferta, mas com uma condi√ß√£o: ela teria que escolher uma mem√≥ria sua para deixar para tr√°s. Uma troca, se preferir. Elara escolheu deixar a mem√≥ria de seu primeiro amor, considerando que a dor da perda superava o valor da lembran√ßa."`,
                choices: [
                    { text: "Perguntar que tipo de mem√≥rias seriam valiosas para o Guardi√£o", nextPage: "valuable_memories" },
                    { text: "Perguntar se Elara conseguiu voltar para seu mundo", nextPage: "elara_fate" },
                    { text: "Agradecer ao Bibliotec√°rio e perguntar sobre as tr√™s chaves", nextPage: "three_keys_info" }
                ]
            },
            
            "combat": {
                title: "Preparando-se para o Combate",
                text: `Voc√™ percebe que um desafio inevit√°vel est√° √† sua frente. A tens√£o no ar √© palp√°vel enquanto voc√™ se prepara para enfrentar seu oponente.

As regras deste mundo s√£o estranhas, e voc√™ sabe que este n√£o ser√° um combate comum. Aqui, as batalhas s√£o tanto f√≠sicas quanto mentais, tanto literais quanto simb√≥licas.

Seu advers√°rio aguarda, e √© hora de mostrar do que voc√™ √© capaz.`,
                choices: [
                    { text: "Preparar-se para o combate", nextPage: "begin_combat" }
                ]
            },
            
            "begin_combat": {
                title: "In√≠cio do Combate",
                text: `O combate est√° prestes a come√ßar. Prepare suas estrat√©gias e boa sorte!`,
                choices: [
                    { text: "Iniciar Combate", nextPage: "combat_system" }
                ]
            }
        };
        
        // ===== DADOS DOS INIMIGOS =====
        const enemies = {
            "Mestre do Jogo": {
                name: "Mestre do Jogo",
                health: 100,
                avatar: "üßô‚Äç‚ôÇÔ∏è",
                attacks: [
                    { name: "Paradoxo L√≥gico", damage: 15, message: "lan√ßa um paradoxo l√≥gico que confunde sua mente!" },
                    { name: "Pe√ßas Rebeldes", damage: 10, message: "comanda pe√ßas do tabuleiro para atacar voc√™!" },
                    { name: "Distor√ß√£o de Regras", damage: 20, message: "distorce as regras do jogo, criando uma onda de energia!" }
                ],
                winPage: "game_victory",
                losePage: "game_defeat",
                difficulty: "medium"
            },
            "Guardi√£o da Floresta": {
                name: "Guardi√£o da Floresta",
                health: 120,
                avatar: "üå≥",
                attacks: [
                    { name: "Ra√≠zes Agarradoras", damage: 12, message: "envia ra√≠zes que tentam prender seus p√©s!" },
                    { name: "Espinhos Venenosos", damage: 18, message: "dispara espinhos venenosos em sua dire√ß√£o!" },
                    { name: "F√∫ria da Natureza", damage: 25, message: "conjura uma tempestade de folhas afiadas!" }
                ],
                winPage: "forest_victory",
                losePage: "forest_defeat",
                difficulty: "hard"
            },
            "Espectro de Mem√≥rias": {
                name: "Espectro de Mem√≥rias",
                health: 80,
                avatar: "üëª",
                attacks: [
                    { name: "Toque G√©lido", damage: 10, message: "passa atrav√©s de voc√™ com um toque g√©lido!" },
                    { name: "Eco do Passado", damage: 15, message: "evoca mem√≥rias dolorosas que machucam sua mente!" },
                    { name: "Disson√¢ncia Temporal", damage: 20, message: "cria uma distor√ß√£o no tempo que causa dor!" }
                ],
                winPage: "spectre_victory",
                losePage: "spectre_defeat",
                difficulty: "easy"
            }
        };
        
        // ===== COMPONENTES INTERATIVOS E ENGRA√áADOS PARA COMBATE =====
        const funnyAttacks = [
            "um abacaxi explosivo",
            "um peixe congelado",
            "uma bola de meias sujas",
            "um patinho de borracha supers√¥nico",
            "uma chaleira assobiante",
            "uma banana escorregadia",
            "um livro de piadas ruins",
            "um controle remoto universal",
            "um chap√©u falante",
            "uma escova de dentes el√©trica"
        ];
        
        const funnyDefenses = [
            "um guarda-chuva invertido",
            "uma almofada gigante",
            "um escudo feito de gelatina",
            "uma porta de geladeira",
            "uma cole√ß√£o de adesivos defensivos",
            "um moletom com capuz m√°gico",
            "um tapete flutuante",
            "um espelho de bolso reflexivo",
            "uma concha de tartaruga emprestada",
            "uma bolha de sab√£o gigante"
        ];
        
        const funnySpecials = [
            "a Dan√ßa da Galinha Hipn√≥tica",
            "o Bocejo Contagioso N√≠vel 10",
            "o Ataque de C√≥cegas Impar√°vel",
            "a T√©cnica Secreta do Espirro Glitter",
            "o Grito Ultrass√¥nico de Soprano",
            "a Invoca√ß√£o do Ex√©rcito de Patos",
            "o Golpe Surpresa do Travesseiro",
            "a Magia Ancestral do Troca-Troca de Meias",
            "o Ritual Proibido da Pizza Abacaxi",
            "o Truque do Polegar Remov√≠vel"
        ];
        
        const funnyItems = [
            "Po√ß√£o de Coragem (√© s√≥ refrigerante com corante)",
            "Granada de Glitter Ofuscante",
            "Spray Anti-Monstro (desodorante com etiqueta diferente)",
            "Sandu√≠che da For√ßa Suprema",
            "Amuleto da Sorte (uma ferradura de pl√°stico)",
            "Elixir Energ√©tico (caf√© com muito a√ß√∫car)",
            "Bolinhas de Gude Distrativas",
            "Pompom de Torcida Motivacional",
            "Carta de Uno 'Reverse'",
            "Apito Ensurdecedor de Treinador"
        ];
        
        // ===== VARI√ÅVEIS DE ESTADO DO JOGO =====
        let gameState = {
            currentPage: "start",
            inventory: [],
            health: 100,
            combatStats: {
                inCombat: false,
                playerHealth: 100,
                enemyHealth: 100,
                currentEnemy: null,
                playerTurn: true,
                specialAvailable: true,
                itemsAvailable: 3
            }
        };
        
        // ===== FUN√á√ïES DE GERENCIAMENTO DE TELA =====
        
        // Fun√ß√£o para criar elementos flutuantes na tela inicial
        function createFloatingElements() {
            const container = document.getElementById('floating-elements');
            const symbols = ['üí´', '‚ú®', 'üîÆ', 'üìö', 'üóùÔ∏è', 'üß©', 'üîç', '‚è≥', 'üßø', 'üè∫'];
            
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                
                // Posi√ß√£o aleat√≥ria
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                element.style.left = `${posX}%`;
                element.style.top = `${posY}%`;
                
                // Tamanho aleat√≥rio
                const size = Math.random() * 2 + 1;
                element.style.fontSize = `${size}rem`;
                
                // Anima√ß√£o aleat√≥ria
                const delay = Math.random() * 10;
                const duration = Math.random() * 10 + 10;
                element.style.animationDelay = `${delay}s`;
                element.style.animationDuration = `${duration}s`;
                
                container.appendChild(element);
            }
        }
        
        // Fun√ß√£o para mostrar a tela espec√≠fica
        function showScreen(screenId) {
            console.log(`Mostrando tela: ${screenId}`);
            // Esconder todas as telas
            document.querySelectorAll('#start-screen, #prologue-screen, .story-screen, #combat-screen, #result-screen').forEach(screen => {
                screen.classList.remove('visible');
            });
            
            // Mostrar a tela solicitada
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('visible');
            } else {
                console.error(`Tela n√£o encontrada: ${screenId}`);
            }
        }
        
        // Fun√ß√£o para navegar para uma p√°gina da hist√≥ria
        function navigateToPage(pageId) {
            console.log(`Navegando para p√°gina: ${pageId}`);
            // Atualizar o estado do jogo
            gameState.currentPage = pageId;
            
            if (pageId === "begin_combat") {
                startCombat();
                return;
            }
            
            const page = storyData[pageId];
            
            if (!page) {
                console.error(`P√°gina n√£o encontrada: ${pageId}`);
                return;
            }
            
            try {
                // Clonar o template
                const storyTemplate = document.getElementById('story-template');
                if (!storyTemplate) {
                    console.error('Template de hist√≥ria n√£o encontrado!');
                    return;
                }
                
                const storyScreen = storyTemplate.cloneNode(true);
                storyScreen.id = `story-screen-${pageId}`;
                
                // Adicionar o texto da hist√≥ria
                const storyText = storyScreen.querySelector('.story-text');
                if (!storyText) {
                    console.error('Elemento de texto da hist√≥ria n√£o encontrado no template!');
                    return;
                }
                
                storyText.innerHTML = `<h2>${page.title}</h2>${page.text.replace(/\n/g, '<br>')}<br><br>`;
                
                // Ajustar dura√ß√£o da anima√ß√£o com base no comprimento do texto
                const textLength = page.text.length;
                const scrollDuration = Math.max(30, textLength / 20); // 1 segundo para cada 20 caracteres, m√≠nimo 30s
                storyText.style.setProperty('--story-scroll-duration', `${scrollDuration}s`);
                
                // Adicionar os bot√µes de escolha
                const choicesContainer = storyScreen.querySelector('.choices-container');
                if (!choicesContainer) {
                    console.error('Container de escolhas n√£o encontrado no template!');
                    return;
                }
                
                choicesContainer.innerHTML = '';
                
                page.choices.forEach((choice, index) => {
                    const button = document.createElement('button');
                    button.className = 'choice-button';
                    button.textContent = choice.text;
                    button.dataset.nextPage = choice.nextPage;
                    
                    if (choice.nextPage === 'combat') {
                        button.dataset.enemy = choice.enemy;
                        button.dataset.difficulty = choice.difficulty;
                    }
                    
                    choicesContainer.appendChild(button);
                });
                
                // Remover qualquer tela de hist√≥ria existente
                document.querySelectorAll('.story-screen.visible').forEach(screen => {
                    screen.remove();
                });
                
                // Adicionar a nova tela ao DOM
                document.body.appendChild(storyScreen);
                
                // Configurar eventos de toque/clique para pausa do texto
                setupTextScrollPause(storyScreen);
                
                // Usar showScreen para exibir a tela - ADICIONADO PARA CORRIGIR O PROBLEMA
                showScreen(`story-screen-${pageId}`);
                
            } catch (error) {
                console.error('Erro ao navegar para a p√°gina:', error);
            }
        }
        
        // Fun√ß√£o para configurar pausa do texto com toque
        function setupTextScrollPause(storyScreen) {
            const storyContainer = storyScreen.querySelector('.story-container');
            const storyText = storyScreen.querySelector('.story-text');
            
            if (!storyContainer || !storyText) {
                console.error('Elementos n√£o encontrados para configurar pausa de texto');
                return;
            }
            
            let isPaused = false;
            
            // Fun√ß√£o para pausar/resumir a anima√ß√£o
            function togglePause(e) {
                // Impedir comportamento padr√£o
                e.preventDefault();
                
                if (isPaused) {
                    // Resumir
                    storyText.classList.remove('paused');
                } else {
                    // Pausar
                    storyText.classList.add('paused');
                }
                
                isPaused = !isPaused;
            }
            
            // Eventos de mouse
            storyContainer.addEventListener('mousedown', togglePause);
            storyContainer.addEventListener('mouseup', togglePause);
            
            // Eventos de toque para dispositivos m√≥veis
            storyContainer.addEventListener('touchstart', togglePause, { passive: false });
            storyContainer.addEventListener('touchend', togglePause, { passive: false });
        }
        
        // ===== SISTEMA DE COMBATE =====
        function startCombat() {
            console.log('Iniciando combate');
            // Mostrar tela de combate
            showScreen('combat-screen');
            
            // Determinar inimigo com base na escolha ou p√°gina atual
            const enemyData = gameState.combatEnemy || enemies["Mestre do Jogo"];
            
            // Configurar estado do combate
            gameState.combatStats.inCombat = true;
            gameState.combatStats.playerHealth = 100;
            gameState.combatStats.enemyHealth = enemyData.health;
            gameState.combatStats.currentEnemy = enemyData;
            gameState.combatStats.playerTurn = true;
            gameState.combatStats.specialAvailable = true;
            gameState.combatStats.itemsAvailable = 3;
            
            // Atualizar a interface de combate
            updateCombatUI();
            
            // Configurar eventos dos bot√µes de combate
            document.getElementById('attack-button').onclick = performAttack;
            document.getElementById('defend-button').onclick = performDefend;
            document.getElementById('special-button').onclick = performSpecial;
            document.getElementById('item-button').onclick = useItem;
            
            // Limpar log de combate
            document.getElementById('combat-log').innerHTML = '<p>Prepare-se para o combate!</p>';
            
            // Configurar o nome e avatar do inimigo
            document.getElementById('enemy-name').textContent = enemyData.name || "Inimigo";
            document.getElementById('enemy-avatar').textContent = enemyData.avatar || "üëπ";
            
            // Ajustar barras de sa√∫de
            updateHealthBars();
        }
        
        function updateCombatUI() {
            const { currentEnemy, playerTurn, specialAvailable, itemsAvailable } = gameState.combatStats;
            
            if (!currentEnemy) {
                console.error('Inimigo n√£o definido para atualizar UI de combate');
                return;
            }
            
            // Atualizar subt√≠tulo
            document.getElementById('combat-subtitle').textContent = 
                playerTurn ? "Sua vez de agir!" : `${currentEnemy.name} est√° se preparando...`;
            
            // Desabilitar bot√µes quando n√£o for a vez do jogador
            document.querySelectorAll('.combat-button').forEach(button => {
                button.disabled = !playerTurn;
            });
            
            // Gerenciar bot√£o de especial
            document.getElementById('special-button').disabled = !playerTurn || !specialAvailable;
            if (!specialAvailable) {
                document.getElementById('special-button').textContent = "Especial (Usado)";
            } else {
                document.getElementById('special-button').textContent = "Ataque Especial";
            }
            
            // Gerenciar bot√£o de item
            document.getElementById('item-button').disabled = !playerTurn || itemsAvailable <= 0;
            document.getElementById('item-button').textContent = 
                itemsAvailable > 0 ? `Usar Item (${itemsAvailable})` : "Sem Itens";
        }
        
        function updateHealthBars() {
            const { playerHealth, enemyHealth } = gameState.combatStats;
            
            // Atualizar barra de sa√∫de do jogador
            document.getElementById('player-health').style.width = `${playerHealth}%`;
            
            // Atualizar barra de sa√∫de do inimigo
            document.getElementById('enemy-health').style.width = `${enemyHealth}%`;
        }
        
        function addCombatLog(message) {
            const log = document.getElementById('combat-log');
            const entry = document.createElement('p');
            entry.innerHTML = message;
            log.insertBefore(entry, log.firstChild);
            
            // Limitar o n√∫mero de entradas para evitar sobrecarga
            if (log.children.length > 10) {
                log.removeChild(log.lastChild);
            }
        }
        
        function performAttack() {
            if (!gameState.combatStats.playerTurn) return;
            
            // Selecionar um ataque engra√ßado aleat√≥rio
            const attackItem = funnyAttacks[Math.floor(Math.random() * funnyAttacks.length)];
            
            // Calcular dano
            const damage = Math.floor(Math.random() * 15) + 10;
            
            // Aplicar dano ao inimigo
            gameState.combatStats.enemyHealth -= damage;
            if (gameState.combatStats.enemyHealth < 0) gameState.combatStats.enemyHealth = 0;
            
            // Adicionar ao log
            addCombatLog(`Voc√™ ataca com <strong>${attackItem}</strong> e causa <strong>${damage}</strong> de dano!`);
            
            // Atualizar UI
            updateHealthBars();
            
            // Verificar se o combate terminou
            if (gameState.combatStats.enemyHealth <= 0) {
                endCombat(true);
                return;
            }
            
            // Passar a vez para o inimigo
            gameState.combatStats.playerTurn = false;
            updateCombatUI();
            
            // Inimigo ataca ap√≥s um pequeno delay
            setTimeout(enemyTurn, 1500);
        }
        
        function performDefend() {
            if (!gameState.combatStats.playerTurn) return;
            
            // Selecionar uma defesa engra√ßada aleat√≥ria
            const defenseItem = funnyDefenses[Math.floor(Math.random() * funnyDefenses.length)];
            
            // Adicionar ao log
            addCombatLog(`Voc√™ se defende com <strong>${defenseItem}</strong>!`);
            
            // Definir estado de defesa (reduz dano do pr√≥ximo ataque)
            gameState.combatStats.defending = true;
            
            // Recuperar um pouco de sa√∫de
            const heal = Math.floor(Math.random() * 10) + 5;
            gameState.combatStats.playerHealth += heal;
            if (gameState.combatStats.playerHealth > 100) gameState.combatStats.playerHealth = 100;
            
            addCombatLog(`Voc√™ recupera <strong>${heal}</strong> pontos de vida!`);
            
            // Atualizar UI
            updateHealthBars();
            
            // Passar a vez para o inimigo
            gameState.combatStats.playerTurn = false;
            updateCombatUI();
            
            // Inimigo ataca ap√≥s um pequeno delay
            setTimeout(enemyTurn, 1500);
        }
        
        function performSpecial() {
            if (!gameState.combatStats.playerTurn || !gameState.combatStats.specialAvailable) return;
            
            // Selecionar um ataque especial engra√ßado aleat√≥rio
            const specialAttack = funnySpecials[Math.floor(Math.random() * funnySpecials.length)];
            
            // Calcular dano (maior que o ataque normal)
            const damage = Math.floor(Math.random() * 20) + 20;
            
            // Aplicar dano ao inimigo
            gameState.combatStats.enemyHealth -= damage;
            if (gameState.combatStats.enemyHealth < 0) gameState.combatStats.enemyHealth = 0;
            
            // Adicionar ao log
            addCombatLog(`Voc√™ usa <strong>${specialAttack}</strong> e causa um incr√≠vel <strong>${damage}</strong> de dano!`);
            
            // Atualizar UI
            updateHealthBars();
            
            // Desabilitar o especial (uso √∫nico por combate)
            gameState.combatStats.specialAvailable = false;
            
            // Verificar se o combate terminou
            if (gameState.combatStats.enemyHealth <= 0) {
                endCombat(true);
                return;
            }
            
            // Passar a vez para o inimigo
            gameState.combatStats.playerTurn = false;
            updateCombatUI();
            
            // Inimigo ataca ap√≥s um pequeno delay
            setTimeout(enemyTurn, 1500);
        }
        
        function useItem() {
            if (!gameState.combatStats.playerTurn || gameState.combatStats.itemsAvailable <= 0) return;
            
            // Selecionar um item engra√ßado aleat√≥rio
            const item = funnyItems[Math.floor(Math.random() * funnyItems.length)];
            
            // Efeito aleat√≥rio (cura ou dano)
            const effect = Math.random();
            
            if (effect < 0.7) {
                // 70% chance de curar
                const heal = Math.floor(Math.random() * 30) + 20;
                gameState.combatStats.playerHealth += heal;
                if (gameState.combatStats.playerHealth > 100) gameState.combatStats.playerHealth = 100;
                
                addCombatLog(`Voc√™ usa <strong>${item}</strong> e recupera <strong>${heal}</strong> pontos de vida!`);
            } else {
                // 30% chance de causar dano
                const damage = Math.floor(Math.random() * 25) + 15;
                gameState.combatStats.enemyHealth -= damage;
                if (gameState.combatStats.enemyHealth < 0) gameState.combatStats.enemyHealth = 0;
                
                addCombatLog(`Voc√™ usa <strong>${item}</strong> e causa <strong>${damage}</strong> de dano!`);
                
                // Verificar se o combate terminou
                if (gameState.combatStats.enemyHealth <= 0) {
                    endCombat(true);
                    return;
                }
            }
            
            // Decrementar contador de itens
            gameState.combatStats.itemsAvailable--;
            
            // Atualizar UI
            updateHealthBars();
            updateCombatUI();
            
            // Passar a vez para o inimigo
            gameState.combatStats.playerTurn = false;
            
            // Inimigo ataca ap√≥s um pequeno delay
            setTimeout(enemyTurn, 1500);
        }
        
        function enemyTurn() {
            const { currentEnemy, defending } = gameState.combatStats;
            
            if (!currentEnemy || !currentEnemy.attacks) {
                console.error('Dados do inimigo inv√°lidos para o turno do inimigo');
                return;
            }
            
            // Selecionar um ataque aleat√≥rio do inimigo
            const attackIndex = Math.floor(Math.random() * currentEnemy.attacks.length);
            const attack = currentEnemy.attacks[attackIndex];
            
            // Calcular dano com base na dificuldade e estado de defesa
            let damage = attack.damage;
            
            // Ajustar dano com base na dificuldade
            if (currentEnemy.difficulty === "easy") damage = Math.floor(damage * 0.8);
            if (currentEnemy.difficulty === "hard") damage = Math.floor(damage * 1.2);
            
            // Reduzir dano se o jogador estiver defendendo
            if (defending) {
                damage = Math.floor(damage * 0.5);
                addCombatLog(`Sua defesa reduz o dano do ataque!`);
            }
            
            // Aplicar dano ao jogador
            gameState.combatStats.playerHealth -= damage;
            if (gameState.combatStats.playerHealth < 0) gameState.combatStats.playerHealth = 0;
            
            // Adicionar ao log
            addCombatLog(`<strong>${currentEnemy.name}</strong> ${attack.message} <strong>${damage}</strong> de dano!`);
            
            // Atualizar UI
            updateHealthBars();
            
            // Resetar estado de defesa
            gameState.combatStats.defending = false;
            
            // Verificar se o combate terminou
            if (gameState.combatStats.playerHealth <= 0) {
                endCombat(false);
                return;
            }
            
            // Devolver a vez para o jogador
            gameState.combatStats.playerTurn = true;
            updateCombatUI();
        }
        
        function endCombat(victory) {
            const { currentEnemy } = gameState.combatStats;
            
            if (!currentEnemy) {
                console.error('Inimigo n√£o definido ao finalizar combate');
                return;
            }
            
            const resultScreen = document.getElementById('result-screen');
            const resultTitle = document.getElementById('result-title');
            const resultText = document.getElementById('result-text');
            
            // Configurar tela de resultado
            if (victory) {
                resultTitle.textContent = "Vit√≥ria!";
                resultTitle.className = "result-title win-title";
                resultText.textContent = `Voc√™ derrotou ${currentEnemy.name}! Sua jornada pode continuar.`;
                
                // Preparar para ir para a pr√≥xima p√°gina ap√≥s a vit√≥ria
                document.getElementById('continue-button').onclick = function() {
                    showScreen('result-screen'); // Esconder resultados
                    navigateToPage(currentEnemy.winPage || "start"); // Ir para a pr√≥xima p√°gina
                };
            } else {
                resultTitle.textContent = "Derrota";
                resultTitle.className = "result-title lose-title";
                resultText.textContent = `Voc√™ foi derrotado por ${currentEnemy.name}. Talvez outra abordagem seria melhor...`;
                
                // Preparar para ir para a p√°gina de derrota
                document.getElementById('continue-button').onclick = function() {
                    showScreen('result-screen'); // Esconder resultados
                    navigateToPage(currentEnemy.losePage || "start"); // Ir para a p√°gina de derrota
                };
            }
            
            // Configurar bot√£o de rein√≠cio
            document.getElementById('restart-button').onclick = function() {
                showScreen('result-screen'); // Esconder resultados
                showScreen('start-screen'); // Voltar √† tela inicial
            };
            
            // Mostrar tela de resultado
            showScreen('result-screen');
            
            // Resetar estado de combate
            gameState.combatStats.inCombat = false;
        }
        
        // ===== INICIALIZA√á√ÉO DO JOGO =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Inicializando o jogo...');
            
            // Criar elementos flutuantes na tela inicial
            createFloatingElements();
            
            // Inicializar bot√£o de in√≠cio
            document.getElementById('start-button').addEventListener('click', function() {
                console.log('Bot√£o de in√≠cio clicado');
                showScreen('prologue-screen');
                
                // Configurar dura√ß√£o do pr√≥logo
                const prologueText = document.getElementById('prologue-text');
                prologueText.style.setProperty('--scroll-duration', '60s');
                
                // Configurar timer para mudar para a primeira p√°gina ap√≥s o pr√≥logo
                setTimeout(() => {
                    navigateToPage('start');
                }, 10000); // Reduzido para 10 segundos para facilitar os testes
            });
            
            // Inicializar bot√£o para pular pr√≥logo
            document.getElementById('skip-prologue').addEventListener('click', function() {
                console.log('Pr√≥logo pulado');
                navigateToPage('start');
            });
            
            // Configurar evento de escolha para bot√µes din√¢micos
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('choice-button')) {
                    console.log(`Escolha selecionada: ${e.target.textContent}`);
                    const nextPage = e.target.dataset.nextPage;
                    
                    if (nextPage === 'combat') {
                        // Configurar combate
                        const enemyName = e.target.dataset.enemy;
                        const enemy = enemies[enemyName];
                        if (enemy) {
                            gameState.combatEnemy = enemy;
                            startCombat();
                        } else {
                            console.error(`Inimigo n√£o encontrado: ${enemyName}`);
                        }
                    } else {
                        navigateToPage(nextPage);
                    }
                }
            });
            
            // Prevenir comportamentos indesejados de toque
            document.addEventListener('touchmove', function(e) {
                if (e.target.closest('.story-container')) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // Configurar bot√µes de resultado de combate
            document.getElementById('continue-button').addEventListener('click', function() {
                showScreen('result-screen');
                navigateToPage(gameState.nextPage || 'start');
            });
            
            document.getElementById('restart-button').addEventListener('click', function() {
                showScreen('start-screen');
            });
            
            console.log('Jogo inicializado com sucesso!');
        });
    </script>
</body>
</html>
